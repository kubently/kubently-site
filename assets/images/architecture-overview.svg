<svg width="900" height="650" viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
  <!-- Definitions for glows and markers -->
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.1"/>
    </filter>
    <filter id="glow-blue">
      <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrow-teal" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#14b8a6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="650" fill="#f8fafc" rx="12"/>

  <!-- SECTION: External Clients -->
  <g transform="translate(250, 40)">
    <rect x="0" y="0" width="400" height="80" rx="8" fill="white" stroke="#cbd5e1" filter="url(#shadow)"/>
    <text x="200" y="30" font-family="sans-serif" font-size="16" font-weight="bold" fill="#1e293b" text-anchor="middle">External Clients</text>
    
    <!-- Icons/Subtext -->
    <g transform="translate(60, 50)">
      <circle cx="0" cy="0" r="4" fill="#64748b"/>
      <text x="10" y="4" font-family="sans-serif" font-size="12" fill="#64748b">CLI</text>
    </g>
    <g transform="translate(130, 50)">
      <circle cx="0" cy="0" r="4" fill="#64748b"/>
      <text x="10" y="4" font-family="sans-serif" font-size="12" fill="#64748b">Web UI</text>
    </g>
    <g transform="translate(210, 50)">
      <circle cx="0" cy="0" r="4" fill="#64748b"/>
      <text x="10" y="4" font-family="sans-serif" font-size="12" fill="#64748b">AI Services</text>
    </g>
    <g transform="translate(310, 50)">
      <circle cx="0" cy="0" r="4" fill="#64748b"/>
      <text x="10" y="4" font-family="sans-serif" font-size="12" fill="#64748b">A2A Agents</text>
    </g>
  </g>

  <!-- Arrow Down -->
  <path d="M 450 120 L 450 150" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="460" y="140" font-family="sans-serif" font-size="11" fill="#64748b">HTTPS / REST</text>

  <!-- SECTION: Ingress -->
  <g transform="translate(300, 150)">
    <rect x="0" y="0" width="300" height="50" rx="25" fill="#e0f2fe" stroke="#7dd3fc" stroke-width="2"/>
    <text x="150" y="30" font-family="sans-serif" font-size="14" font-weight="bold" fill="#0369a1" text-anchor="middle">Load Balancer / Ingress</text>
  </g>

  <!-- Arrow Down -->
  <path d="M 450 200 L 450 230" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- SECTION: Kubently API Cluster -->
  <g transform="translate(100, 230)">
    <!-- Container Box -->
    <rect x="0" y="0" width="700" height="140" rx="12" fill="white" stroke="#cbd5e1" stroke-dasharray="5,5"/>
    <text x="350" y="25" font-family="sans-serif" font-size="14" font-weight="bold" fill="#475569" text-anchor="middle">Kubently API Service (Auto-scaling)</text>

    <!-- Pods -->
    <g transform="translate(80, 50)">
      <rect width="100" height="60" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
      <text x="50" y="35" font-family="sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">API Pod 1</text>
    </g>

    <g transform="translate(220, 50)">
      <rect width="100" height="60" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
      <text x="50" y="35" font-family="sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">API Pod 2</text>
    </g>

    <g transform="translate(360, 50)">
      <rect width="100" height="60" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
      <text x="50" y="35" font-family="sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">API Pod 3</text>
    </g>
    
    <text x="530" y="85" font-family="sans-serif" font-size="24" fill="#94a3b8" font-weight="bold">...</text>
  </g>

  <!-- Arrows to Redis -->
  <path d="M 250 370 L 350 420" stroke="#14b8a6" stroke-width="2" stroke-dasharray="4,4"/>
  <path d="M 390 370 L 410 420" stroke="#14b8a6" stroke-width="2" stroke-dasharray="4,4"/>
  <path d="M 530 370 L 470 420" stroke="#14b8a6" stroke-width="2" stroke-dasharray="4,4"/>
  
  <text x="550" y="400" font-family="sans-serif" font-size="11" fill="#0d9488" font-weight="bold">Pub/Sub Channel</text>

  <!-- SECTION: Redis -->
  <g transform="translate(350, 420)">
    <rect x="0" y="0" width="200" height="80" rx="8" fill="#ccfbf1" stroke="#14b8a6" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="30" font-family="sans-serif" font-size="14" font-weight="bold" fill="#0f766e" text-anchor="middle">Redis Cluster</text>
    <text x="100" y="55" font-family="sans-serif" font-size="11" fill="#115e59" text-anchor="middle">Pub/Sub + State Store</text>
  </g>

  <!-- Arrow to Executors -->
  <path d="M 450 500 L 450 540" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow-teal)"/> <!-- SSE Color -->
  <text x="460" y="525" font-family="sans-serif" font-size="11" font-weight="bold" fill="#d97706">SSE Stream (~50ms)</text>

  <!-- SECTION: Executors -->
  <g transform="translate(100, 540)">
    <rect x="0" y="0" width="700" height="90" rx="8" fill="white" stroke="#cbd5e1"/>
    <text x="350" y="25" font-family="sans-serif" font-size="14" font-weight="bold" fill="#475569" text-anchor="middle">Kubently Executors (In-Cluster)</text>

    <g transform="translate(50, 35)">
      <rect width="180" height="40" rx="4" fill="#1e293b"/>
      <text x="90" y="25" font-family="sans-serif" font-size="12" fill="white" text-anchor="middle">Executor A (Prod)</text>
    </g>

    <g transform="translate(260, 35)">
      <rect width="180" height="40" rx="4" fill="#1e293b"/>
      <text x="90" y="25" font-family="sans-serif" font-size="12" fill="white" text-anchor="middle">Executor B (Staging)</text>
    </g>

    <g transform="translate(470, 35)">
      <rect width="180" height="40" rx="4" fill="#1e293b"/>
      <text x="90" y="25" font-family="sans-serif" font-size="12" fill="white" text-anchor="middle">Executor C (Dev)</text>
    </g>
  </g>
</svg>